<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¶”ì²œì¸ í”„ë¡œê·¸ë¨ - AI ì‚¬ì£¼ ì²œë…„ì§€ê¸°</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/modal.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .referral-hero { background: linear-gradient(135deg, #d4af37, #f4e5b5); padding: 100px 0 60px; text-align: center; }
        .referral-hero h1 { font-size: 3rem; color: #1a1a1a; margin-bottom: 1rem; }
        .referral-code-section { padding: 3rem 0; }
        .code-card { background: white; border-radius: 20px; padding: 3rem; text-align: center; max-width: 600px; margin: 0 auto; box-shadow: 0 10px 40px rgba(0,0,0,0.1); }
        .my-code { font-size: 3rem; font-weight: bold; color: #c41e3a; background: #f5f5f5; padding: 1.5rem; border-radius: 15px; margin: 2rem 0; font-family: 'Courier New', monospace; }
        .share-buttons { display: flex; gap: 1rem; margin-top: 2rem; }
        .btn-share { flex: 1; padding: 1rem; border-radius: 10px; border: none; cursor: pointer; font-weight: bold; transition: all 0.3s; }
        .btn-kakao { background: #FEE500; color: #000; }
        .btn-copy { background: #1a1a1a; color: white; }
        .stats-section { background: #f5f5f5; padding: 3rem 0; }
        .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 2rem; margin-top: 2rem; }
        .stat-card { background: white; padding: 2rem; border-radius: 15px; text-align: center; }
        .stat-number { font-size: 2.5rem; font-weight: bold; color: #c41e3a; }
        .rewards-section { padding: 3rem 0; }
        .rewards-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 2rem; margin-top: 2rem; }
        .reward-card { background: linear-gradient(135deg, #c41e3a, #8b0000); color: white; padding: 2rem; border-radius: 15px; text-align: center; }
        .reward-amount { font-size: 2rem; font-weight: bold; margin: 1rem 0; }
        .leaderboard-section { background: #f5f5f5; padding: 3rem 0; }
        .leaderboard { background: white; border-radius: 15px; padding: 2rem; }
        .leader-item { display: flex; align-items: center; padding: 1rem; border-bottom: 1px solid #eee; }
        .leader-rank { font-size: 1.5rem; font-weight: bold; width: 50px; }
        .leader-name { flex: 1; }
        .leader-count { font-weight: bold; color: #c41e3a; }
        @media (max-width: 768px) {
            .stats-grid, .rewards-grid { grid-template-columns: 1fr; }
            .share-buttons { flex-direction: column; }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand"><a href="index.html"><i class="fas fa-yin-yang"></i> AI ì‚¬ì£¼ ì²œë…„ì§€ê¸°</a></div>
            <ul class="nav-menu">
                <li><a href="index.html">í™ˆ</a></li>
                <li><a href="pricing.html">ê°€ê²©í‘œ</a></li>
                <li><a href="ai-chat.html">AI ìƒë‹´</a></li>
                <li><a href="referral.html" class="active">ì¶”ì²œì¸</a></li>
                <li><a href="mypage.html">ë§ˆì´í˜ì´ì§€</a></li>
            </ul>
        </div>
    </nav>

    <section class="referral-hero">
        <div class="container">
            <h1><i class="fas fa-gift"></i> ì¹œêµ¬ ì´ˆëŒ€í•˜ê³  ë³´ìƒ ë°›ê¸°</h1>
            <p style="font-size: 1.3rem; color: #1a1a1a;">ì¹œêµ¬ê°€ ìœ ë£Œ ì „í™˜ ì‹œ ì–‘ìª½ ëª¨ë‘ í˜œíƒ!</p>
        </div>
    </section>

    <section class="referral-code-section">
        <div class="container">
            <div class="code-card">
                <h2>ë‚˜ì˜ ì¶”ì²œ ì½”ë“œ</h2>
                <div class="my-code" id="myReferralCode">LOADING...</div>
                <p>ì´ ì½”ë“œë¥¼ ì¹œêµ¬ì—ê²Œ ê³µìœ í•˜ì„¸ìš”!</p>
                <div class="share-buttons">
                    <button class="btn-share btn-kakao" onclick="shareKakao()"><i class="fab fa-kickstarter"></i> ì¹´ì¹´ì˜¤í†¡</button>
                    <button class="btn-share btn-copy" onclick="copyCode()"><i class="fas fa-copy"></i> ë³µì‚¬í•˜ê¸°</button>
                </div>
            </div>
        </div>
    </section>

    <section class="stats-section">
        <div class="container">
            <h2 style="text-align: center;">ë‚˜ì˜ ì¶”ì²œ í˜„í™©</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalReferrals">0</div>
                    <div>ì´ ì¶”ì²œ ìˆ˜</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="convertedReferrals">0</div>
                    <div>ì „í™˜ëœ ì¶”ì²œ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">â‚©<span id="earnedRewards">0</span></div>
                    <div>íšë“ ë³´ìƒ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">â‚©<span id="pendingRewards">0</span></div>
                    <div>ëŒ€ê¸° ì¤‘ ë³´ìƒ</div>
                </div>
            </div>
        </div>
    </section>

    <section class="rewards-section">
        <div class="container">
            <h2 style="text-align: center;">ë³´ìƒ êµ¬ì¡°</h2>
            <div class="rewards-grid">
                <div class="reward-card">
                    <i class="fas fa-user-plus" style="font-size: 3rem;"></i>
                    <h3>ì¶”ì²œì¸</h3>
                    <div class="reward-amount">â‚©3,000</div>
                    <p>ì¹œêµ¬ê°€ ìœ ë£Œ ì „í™˜ ì‹œ ì ë¦½</p>
                </div>
                <div class="reward-card">
                    <i class="fas fa-percentage" style="font-size: 3rem;"></i>
                    <h3>í”¼ì¶”ì²œì¸</h3>
                    <div class="reward-amount">30% í• ì¸</div>
                    <p>ì²« êµ¬ë§¤ ì‹œ ìë™ ì ìš©</p>
                </div>
                <div class="reward-card">
                    <i class="fas fa-trophy" style="font-size: 3rem;"></i>
                    <h3>ë³´ë„ˆìŠ¤</h3>
                    <div class="reward-amount">â‚©10,000</div>
                    <p>10ëª…ë§ˆë‹¤ ì¶”ê°€ ì§€ê¸‰</p>
                </div>
            </div>
        </div>
    </section>

    <section class="leaderboard-section">
        <div class="container">
            <h2 style="text-align: center;">ì¶”ì²œ ë¦¬ë”ë³´ë“œ</h2>
            <div class="leaderboard">
                <div class="leader-item">
                    <div class="leader-rank">ğŸ¥‡</div>
                    <div class="leader-name">ê¹€**</div>
                    <div class="leader-count">127ëª… ì¶”ì²œ</div>
                </div>
                <div class="leader-item">
                    <div class="leader-rank">ğŸ¥ˆ</div>
                    <div class="leader-name">ì´**</div>
                    <div class="leader-count">98ëª… ì¶”ì²œ</div>
                </div>
                <div class="leader-item">
                    <div class="leader-rank">ğŸ¥‰</div>
                    <div class="leader-name">ë°•**</div>
                    <div class="leader-count">76ëª… ì¶”ì²œ</div>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <p>&copy; AI ì‚¬ì£¼ ì²œë…„ì§€ê¸°. All rights reserved.</p>
        </div>
    </footer>

    <script>
        let user = null;
        document.addEventListener('DOMContentLoaded', () => {
            user = JSON.parse(localStorage.getItem('currentUser') || '{}');
            if (!user.id) {
                alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                window.location.href = 'login.html';
                return;
            }
            loadReferralData();
        });

        function loadReferralData() {
            const code = user.referralCode || generateReferralCode();
            document.getElementById('myReferralCode').textContent = code;
            
            const stats = JSON.parse(localStorage.getItem('referralStats_' + user.id) || '{"total":0,"converted":0,"earned":0,"pending":0}');
            document.getElementById('totalReferrals').textContent = stats.total;
            document.getElementById('convertedReferrals').textContent = stats.converted;
            document.getElementById('earnedRewards').textContent = stats.earned.toLocaleString();
            document.getElementById('pendingRewards').textContent = stats.pending.toLocaleString();
        }

        function generateReferralCode() {
            return 'REF' + Math.random().toString(36).substring(2, 8).toUpperCase();
        }

        function copyCode() {
            const code = document.getElementById('myReferralCode').textContent;
            navigator.clipboard.writeText(code);
            alert('ì¶”ì²œ ì½”ë“œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        function shareKakao() {
            const code = document.getElementById('myReferralCode').textContent;
            alert(`ì¹´ì¹´ì˜¤í†¡ ê³µìœ  ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.\nì¶”ì²œ ì½”ë“œ: ${code}`);
        }
    </script>
    <script src="js/page-handler.js"></script>
</body>
</html>
