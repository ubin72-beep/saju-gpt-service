  1	<!DOCTYPE html>
     2	<html lang="ko">
     3	<head>
     4	    <meta charset="UTF-8">
     5	    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     6	    <title>관리자 로그인 - AI 사주 천년지기</title>
     7	    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
     8	    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
     9	    <style>
    10	        * {
    11	            margin: 0;
    12	            padding: 0;
    13	            box-sizing: border-box;
    14	        }
    15	
    16	        body {
    17	            font-family: 'Noto Sans KR', sans-serif;
    18	            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    19	            min-height: 100vh;
    20	            display: flex;
    21	            align-items: center;
    22	            justify-content: center;
    23	            padding: 20px;
    24	        }
    25	
    26	        .login-container {
    27	            background: white;
    28	            border-radius: 20px;
    29	            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    30	            width: 100%;
    31	            max-width: 450px;
    32	            overflow: hidden;
    33	        }
    34	
    35	        .login-header {
    36	            background: linear-gradient(135deg, #c41e3a 0%, #a01830 100%);
    37	            padding: 3rem 2rem;
    38	            text-align: center;
    39	            color: white;
    40	        }
    41	
    42	        .login-header i {
    43	            font-size: 3rem;
    44	            margin-bottom: 1rem;
    45	            opacity: 0.9;
    46	        }
    47	
    48	        .login-header h1 {
    49	            font-size: 1.75rem;
    50	            font-weight: 700;
    51	            margin-bottom: 0.5rem;
    52	        }
    53	
    54	        .login-header p {
    55	            font-size: 0.9375rem;
    56	            opacity: 0.9;
    57	        }
    58	
    59	        .login-body {
    60	            padding: 2.5rem 2rem;
    61	        }
    62	
    63	        .form-group {
    64	            margin-bottom: 1.5rem;
    65	        }
    66	
    67	        .form-group label {
    68	            display: block;
    69	            margin-bottom: 0.5rem;
    70	            font-weight: 500;
    71	            color: #2c3e50;
    72	            font-size: 0.9375rem;
    73	        }
    74	
    75	        .input-group {
    76	            position: relative;
    77	        }
    78	
    79	        .input-group i {
    80	            position: absolute;
    81	            left: 1rem;
    82	            top: 50%;
    83	            transform: translateY(-50%);
    84	            color: #9ca3af;
    85	            font-size: 1.125rem;
    86	        }
    87	
    88	        .form-control {
    89	            width: 100%;
    90	            padding: 1rem 1rem 1rem 3rem;
    91	            border: 2px solid #e5e7eb;
    92	            border-radius: 12px;
    93	            font-size: 1rem;
    94	            transition: all 0.3s ease;
    95	        }
    96	
    97	        .form-control:focus {
    98	            outline: none;
    99	            border-color: #c41e3a;
   100	            box-shadow: 0 0 0 4px rgba(196,30,58,0.1);
   101	        }
   102	
   103	        .checkbox-group {
   104	            display: flex;
   105	            align-items: center;
   106	            gap: 0.5rem;
   107	            margin-bottom: 1.5rem;
   108	        }
   109	
   110	        .checkbox-group input[type="checkbox"] {
   111	            width: 18px;
   112	            height: 18px;
   113	            cursor: pointer;
   114	        }
   115	
   116	        .checkbox-group label {
   117	            font-size: 0.9375rem;
   118	            color: #6b7280;
   119	            cursor: pointer;
   120	            margin: 0;
   121	        }
   122	
   123	        .btn-login {
   124	            width: 100%;
   125	            padding: 1rem;
   126	            background: linear-gradient(135deg, #c41e3a 0%, #a01830 100%);
   127	            color: white;
   128	            border: none;
   129	            border-radius: 12px;
   130	            font-size: 1.0625rem;
   131	            font-weight: 600;
   132	            cursor: pointer;
   133	            transition: all 0.3s ease;
   134	            display: flex;
   135	            align-items: center;
   136	            justify-content: center;
   137	            gap: 0.5rem;
   138	        }
   139	
   140	        .btn-login:hover {
   141	            transform: translateY(-2px);
   142	            box-shadow: 0 10px 25px rgba(196,30,58,0.3);
   143	        }
   144	
   145	        .btn-login:active {
   146	            transform: translateY(0);
   147	        }
   148	
   149	        .login-footer {
   150	            text-align: center;
   151	            padding: 1.5rem;
   152	            background: #f9fafb;
   153	            border-top: 1px solid #e5e7eb;
   154	        }
   155	
   156	        .login-footer a {
   157	            color: #c41e3a;
   158	            text-decoration: none;
   159	            font-weight: 500;
   160	            transition: all 0.3s ease;
   161	        }
   162	
   163	        .login-footer a:hover {
   164	            color: #a01830;
   165	            text-decoration: underline;
   166	        }
   167	
   168	        .alert {
   169	            padding: 1rem;
   170	            border-radius: 12px;
   171	            margin-bottom: 1.5rem;
   172	            display: none;
   173	        }
   174	
   175	        .alert.show {
   176	            display: block;
   177	            animation: slideDown 0.3s ease;
   178	        }
   179	
   180	        .alert-danger {
   181	            background: #fee2e2;
   182	            color: #dc2626;
   183	            border: 1px solid #fecaca;
   184	        }
   185	
   186	        .alert-success {
   187	            background: #d1fae5;
   188	            color: #065f46;
   189	            border: 1px solid #a7f3d0;
   190	        }
   191	
   192	        @keyframes slideDown {
   193	            from {
   194	                opacity: 0;
   195	                transform: translateY(-10px);
   196	            }
   197	            to {
   198	                opacity: 1;
   199	                transform: translateY(0);
   200	            }
   201	        }
   202	
   203	        .loading {
   204	            display: inline-block;
   205	            width: 18px;
   206	            height: 18px;
   207	            border: 3px solid rgba(255,255,255,0.3);
   208	            border-top-color: white;
   209	            border-radius: 50%;
   210	            animation: spin 0.8s linear infinite;
   211	        }
   212	
   213	        @keyframes spin {
   214	            to { transform: rotate(360deg); }
   215	        }
   216	
   217	        .demo-info {
   218	            background: #fef3c7;
   219	            border: 2px solid #fbbf24;
   220	            border-radius: 12px;
   221	            padding: 1rem;
   222	            margin-bottom: 1.5rem;
   223	            font-size: 0.875rem;
   224	        }
   225	
   226	        .demo-info strong {
   227	            color: #92400e;
   228	            display: block;
   229	            margin-bottom: 0.5rem;
   230	        }
   231	
   232	        .demo-info code {
   233	            background: white;
   234	            padding: 0.25rem 0.5rem;
   235	            border-radius: 4px;
   236	            font-family: 'Courier New', monospace;
   237	            color: #c41e3a;
   238	        }
   239	
   240	        @media (max-width: 480px) {
   241	            .login-header {
   242	                padding: 2rem 1.5rem;
   243	            }
   244	
   245	            .login-header h1 {
   246	                font-size: 1.5rem;
   247	            }
   248	
   249	            .login-body {
   250	                padding: 2rem 1.5rem;
   251	            }
   252	        }
   253	    </style>
   254	</head>
   255	<body>
   256	    <div class="login-container">
   257	        <div class="login-header">
   258	            <i class="fas fa-shield-alt"></i>
   259	            <h1>관리자 로그인</h1>
   260	            <p>AI 사주 천년지기 관리 시스템</p>
   261	        </div>
   262	
   263	        <div class="login-body">
   264	            <div class="alert alert-danger" id="errorAlert">
   265	                <i class="fas fa-exclamation-circle"></i>
   266	                <span id="errorMessage"></span>
   267	            </div>
   268	
   269	            <form id="loginForm">
   270	                <div class="form-group">
   271	                    <label for="adminId">관리자 이메일</label>
   272	                    <div class="input-group">
   273	                        <i class="fas fa-envelope"></i>
   274	                        <input 
   275	                            type="email" 
   276	                            id="adminId" 
   277	                            class="form-control" 
   278	                            placeholder="admin@example.com"
   279	                            required
   280	                            autocomplete="email"
   281	                        >
   282	                    </div>
   283	                </div>
   284	
   285	                <div class="form-group">
   286	                    <label for="adminPassword">비밀번호</label>
   287	                    <div class="input-group">
   288	                        <i class="fas fa-lock"></i>
   289	                        <input 
   290	                            type="password" 
   291	                            id="adminPassword" 
   292	                            class="form-control" 
   293	                            placeholder="비밀번호를 입력하세요"
   294	                            required
   295	                            autocomplete="current-password"
   296	                        >
   297	                    </div>
   298	                </div>
   299	
   300	                <div class="checkbox-group">
   301	                    <input type="checkbox" id="rememberMe">
   302	                    <label for="rememberMe">로그인 상태 유지</label>
   303	                </div>
   304	
   305	                <button type="submit" class="btn-login" id="loginBtn">
   306	                    <span>로그인</span>
   307	                    <i class="fas fa-arrow-right"></i>
   308	                </button>
   309	            </form>
   310	        </div>
   311	
   312	        <div class="login-footer">
   313	            <a href="index.html">
   314	                <i class="fas fa-arrow-left"></i> 메인 사이트로 돌아가기
   315	            </a>
   316	        </div>
   317	    </div>
   318	
   319	    <!-- API 클라이언트 -->
   320	    <script src="js/api.js"></script>
   321	    
   322	    <script>
   323	        const loginForm = document.getElementById('loginForm');
   324	        const loginBtn = document.getElementById('loginBtn');
   325	        const errorAlert = document.getElementById('errorAlert');
   326	        const errorMessage = document.getElementById('errorMessage');
   327	
   328	        // 페이지 로드 시 이미 로그인되어 있는지 확인
   329	        window.addEventListener('DOMContentLoaded', () => {
   330	            const token = localStorage.getItem('authToken');
   331	            const user = localStorage.getItem('user');
   332	            
   333	            // 이미 로그인된 경우 역할 확인
   334	            if (token && user) {
   335	                const userInfo = JSON.parse(user);
   336	                if (userInfo.role === 'admin') {
   337	                    window.location.href = 'admin.html';
   338	                }
   339	            }
   340	        });
   341	
   342	        // 관리자 로그인 처리
   343	        loginForm.addEventListener('submit', async (e) => {
   344	            e.preventDefault();
   345	
   346	            const email = document.getElementById('adminId').value;
   347	            const password = document.getElementById('adminPassword').value;
   348	            const rememberMe = document.getElementById('rememberMe').checked;
   349	
   350	            // 입력 검증
   351	            if (!email || !password) {
   352	                showError('이메일과 비밀번호를 모두 입력해주세요.');
   353	                return;
   354	            }
   355	
   356	            // 로딩 상태
   357	            loginBtn.disabled = true;
   358	            loginBtn.innerHTML = '<div class="loading"></div><span>로그인 중...</span>';
   359	            errorAlert.classList.remove('show');
   360	
   361	            try {
   362	                // 백엔드 API로 로그인 요청
   363	                const result = await login(email, password);
   364	
   365	                if (result.success) {
   366	                    const { user } = result.data;
   367	                    
   368	                    // 관리자 권한 확인
   369	                    if (user.role !== 'admin') {
   370	                        showError('관리자 권한이 없습니다. 일반 사용자는 메인 페이지에서 로그인해주세요.');
   371	                        resetLoginButton();
   372	                        return;
   373	                    }
   374	                    
   375	                    // Remember Me 처리
   376	                    if (rememberMe) {
   377	                        localStorage.setItem('admin_remember', 'true');
   378	                    }
   379	
   380	                    // 성공 메시지
   381	                    showSuccess(`${user.name}님 환영합니다! 관리자 페이지로 이동합니다...`);
   382	
   383	                    // 관리자 페이지로 이동
   384	                    setTimeout(() => {
   385	                        window.location.href = 'admin.html';
   386	                    }, 1000);
   387	                } else {
   388	                    showError(result.message || '로그인에 실패했습니다.');
   389	                    resetLoginButton();
   390	                }
   391	            } catch (error) {
   392	                console.error('로그인 오류:', error);
   393	                showError('로그인 중 오류가 발생했습니다: ' + error.message);
   394	                resetLoginButton();
   395	            }
   396	        });
   397	
   398	        // 에러 메시지 표시
   399	        function showError(message) {
   400	            errorAlert.className = 'alert alert-danger show';
   401	            errorMessage.innerHTML = `<i class="fas fa-exclamation-circle"></i> ${message}`;
   402	        }
   403	
   404	        // 성공 메시지 표시
   405	        function showSuccess(message) {
   406	            errorAlert.className = 'alert alert-success show';
   407	            errorMessage.innerHTML = `<i class="fas fa-check-circle"></i> ${message}`;
   408	        }
   409	
   410	        // 로그인 버튼 초기화
   411	        function resetLoginButton() {
   412	            loginBtn.disabled = false;
   413	            loginBtn.innerHTML = '<span>로그인</span><i class="fas fa-arrow-right"></i>';
   414	        }
   415	
   416	        console.log('✅ 관리자 로그인 페이지 로드 완료 (백엔드 API 연동)');
   417	    </script>
   418	</body>
   419	</html>
