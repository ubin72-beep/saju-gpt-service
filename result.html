  1	<!DOCTYPE html>
     2	<html lang="ko">
     3	<head>
     4	    <meta charset="UTF-8">
     5	    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     6	    <title>ì‚¬ì£¼íŒ”ì ê²°ê³¼ - AI ì‚¬ì£¼ ì²œë…„ì§€ê¸°</title>
     7	    
     8	    <!-- Lunar Calendar Library -->
     9	    <script src="https://cdn.jsdelivr.net/npm/lunar-javascript@1.6.12/lunar.min.js"></script>
    10	    
    11	    <style>
    12	        * {
    13	            margin: 0;
    14	            padding: 0;
    15	            box-sizing: border-box;
    16	        }
    17	        
    18	        body {
    19	            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Malgun Gothic', sans-serif;
    20	            line-height: 1.6;
    21	            color: #333;
    22	            background: #f5f5f5;
    23	        }
    24	        
    25	        /* ë„¤ë¹„ê²Œì´ì…˜ */
    26	        .navbar {
    27	            background: #1a1a1a;
    28	            padding: 1rem 0;
    29	            position: sticky;
    30	            top: 0;
    31	            z-index: 1000;
    32	            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
    33	        }
    34	        
    35	        .nav-container {
    36	            max-width: 1200px;
    37	            margin: 0 auto;
    38	            padding: 0 20px;
    39	            display: flex;
    40	            justify-content: space-between;
    41	            align-items: center;
    42	        }
    43	        
    44	        .nav-brand {
    45	            color: #d4af37;
    46	            font-size: 1.5rem;
    47	            font-weight: 700;
    48	            text-decoration: none;
    49	        }
    50	        
    51	        .nav-links a {
    52	            color: rgba(255,255,255,0.9);
    53	            text-decoration: none;
    54	            margin-left: 2rem;
    55	            transition: color 0.3s;
    56	        }
    57	        
    58	        .nav-links a:hover {
    59	            color: #d4af37;
    60	        }
    61	        
    62	        /* ê²°ê³¼ í—¤ë” */
    63	        .result-header {
    64	            background: linear-gradient(135deg, #1a1a1a 0%, #8b0000 50%, #c41e3a 100%);
    65	            color: white;
    66	            padding: 60px 20px;
    67	            text-align: center;
    68	        }
    69	        
    70	        .result-header h1 {
    71	            font-size: 2.5rem;
    72	            margin-bottom: 1rem;
    73	            font-weight: 700;
    74	        }
    75	        
    76	        .result-header .user-info {
    77	            font-size: 1.2rem;
    78	            opacity: 0.9;
    79	        }
    80	        
    81	        /* ë©”ì¸ ì»¨í…ì¸  */
    82	        .result-container {
    83	            max-width: 1000px;
    84	            margin: -40px auto 60px;
    85	            padding: 0 20px;
    86	        }
    87	        
    88	        .result-card {
    89	            background: white;
    90	            border-radius: 20px;
    91	            padding: 3rem;
    92	            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
    93	            margin-bottom: 2rem;
    94	        }
    95	        
    96	        .section-title {
    97	            font-size: 1.8rem;
    98	            color: #1a1a1a;
    99	            margin-bottom: 1.5rem;
   100	            padding-bottom: 1rem;
   101	            border-bottom: 3px solid #d4af37;
   102	            font-weight: 700;
   103	        }
   104	        
   105	        .saju-table {
   106	            display: grid;
   107	            grid-template-columns: repeat(4, 1fr);
   108	            gap: 1rem;
   109	            margin-bottom: 2rem;
   110	        }
   111	        
   112	        .saju-column {
   113	            text-align: center;
   114	            padding: 1.5rem;
   115	            background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);
   116	            border-radius: 10px;
   117	            border: 2px solid #d4af37;
   118	        }
   119	        
   120	        .saju-column h3 {
   121	            font-size: 1.1rem;
   122	            color: #c41e3a;
   123	            margin-bottom: 0.5rem;
   124	            font-weight: 600;
   125	        }
   126	        
   127	        .saju-column .hanja {
   128	            font-size: 2rem;
   129	            font-weight: 700;
   130	            color: #1a1a1a;
   131	            margin: 0.5rem 0;
   132	        }
   133	        
   134	        .saju-column .element {
   135	            font-size: 0.9rem;
   136	            color: #666;
   137	        }
   138	        
   139	        .analysis-section {
   140	            margin-top: 2rem;
   141	        }
   142	        
   143	        .analysis-item {
   144	            padding: 1.5rem;
   145	            background: #f9f9f9;
   146	            border-radius: 10px;
   147	            margin-bottom: 1rem;
   148	            border-left: 4px solid #d4af37;
   149	        }
   150	        
   151	        .analysis-item h4 {
   152	            font-size: 1.2rem;
   153	            color: #c41e3a;
   154	            margin-bottom: 0.5rem;
   155	            font-weight: 600;
   156	        }
   157	        
   158	        .analysis-item p {
   159	            color: #333;
   160	            line-height: 1.8;
   161	        }
   162	        
   163	        .fortune-bar {
   164	            margin-top: 1rem;
   165	        }
   166	        
   167	        .fortune-bar-label {
   168	            display: flex;
   169	            justify-content: space-between;
   170	            margin-bottom: 0.5rem;
   171	            font-size: 0.9rem;
   172	        }
   173	        
   174	        .fortune-bar-bg {
   175	            height: 30px;
   176	            background: #e0e0e0;
   177	            border-radius: 15px;
   178	            overflow: hidden;
   179	        }
   180	        
   181	        .fortune-bar-fill {
   182	            height: 100%;
   183	            background: linear-gradient(90deg, #d4af37, #f4e5b5);
   184	            display: flex;
   185	            align-items: center;
   186	            justify-content: flex-end;
   187	            padding-right: 10px;
   188	            color: #1a1a1a;
   189	            font-weight: 700;
   190	            transition: width 1s ease;
   191	        }
   192	        
   193	        /* ì•¡ì…˜ ë²„íŠ¼ */
   194	        .action-buttons {
   195	            display: grid;
   196	            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
   197	            gap: 1rem;
   198	            margin-top: 3rem;
   199	        }
   200	        
   201	        .action-btn {
   202	            padding: 15px 30px;
   203	            border: none;
   204	            border-radius: 10px;
   205	            font-size: 1.1rem;
   206	            font-weight: 600;
   207	            cursor: pointer;
   208	            text-decoration: none;
   209	            text-align: center;
   210	            transition: all 0.3s;
   211	            display: inline-block;
   212	        }
   213	        
   214	        .btn-primary {
   215	            background: linear-gradient(135deg, #c41e3a, #8b0000);
   216	            color: white;
   217	        }
   218	        
   219	        .btn-primary:hover {
   220	            transform: translateY(-3px);
   221	            box-shadow: 0 10px 30px rgba(196,30,58,0.4);
   222	        }
   223	        
   224	        .btn-secondary {
   225	            background: white;
   226	            color: #c41e3a;
   227	            border: 2px solid #c41e3a;
   228	        }
   229	        
   230	        .btn-secondary:hover {
   231	            background: #c41e3a;
   232	            color: white;
   233	        }
   234	        
   235	        .btn-gold {
   236	            background: linear-gradient(135deg, #d4af37, #f4e5b5);
   237	            color: #1a1a1a;
   238	        }
   239	        
   240	        .btn-gold:hover {
   241	            transform: translateY(-3px);
   242	            box-shadow: 0 10px 30px rgba(212,175,55,0.5);
   243	        }
   244	        
   245	        /* í‘¸í„° */
   246	        .footer {
   247	            background: #1a1a1a;
   248	            color: rgba(255,255,255,0.7);
   249	            padding: 40px 20px;
   250	            text-align: center;
   251	        }
   252	        
   253	        /* ë°˜ì‘í˜• */
   254	        @media (max-width: 768px) {
   255	            .saju-table {
   256	                grid-template-columns: repeat(2, 1fr);
   257	            }
   258	            
   259	            .result-card {
   260	                padding: 2rem 1.5rem;
   261	            }
   262	            
   263	            .result-header h1 {
   264	                font-size: 2rem;
   265	            }
   266	        }
   267	    </style>
   268	</head>
   269	<body>
   270	    <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
   271	    <nav class="navbar">
   272	        <div class="nav-container">
   273	            <a href="index.html" class="nav-brand">
   274	                â˜¯ AI ì‚¬ì£¼ ì²œë…„ì§€ê¸°
   275	            </a>
   276	            <div class="nav-links">
   277	                <a href="index.html">í™ˆ</a>
   278	                <a href="pricing.html">ê°€ê²©í‘œ</a>
   279	                <a href="mypage.html">ë§ˆì´í˜ì´ì§€</a>
   280	            </div>
   281	        </div>
   282	    </nav>
   283	
   284	    <!-- ê²°ê³¼ í—¤ë” -->
   285	    <section class="result-header">
   286	        <h1>ğŸ´ ì‚¬ì£¼íŒ”ì ê²°ê³¼</h1>
   287	        <div class="user-info" id="userInfo">
   288	            ìƒë…„ì›”ì¼: <span id="birthdate">-</span> (<span id="calendar">-</span>) | 
   289	            ì„±ë³„: <span id="gender">-</span>
   290	        </div>
   291	    </section>
   292	
   293	    <!-- ê²°ê³¼ ì»¨í…ì¸  -->
   294	    <div class="result-container">
   295	        <!-- ì‚¬ì£¼íŒ”ì -->
   296	        <div class="result-card">
   297	            <h2 class="section-title">â­ ë‹¹ì‹ ì˜ ì‚¬ì£¼íŒ”ì</h2>
   298	            <div class="saju-table">
   299	                <div class="saju-column">
   300	                    <h3>æ™‚æŸ± (ì‹œì£¼)</h3>
   301	                    <div class="hanja" id="time-sky">ç”²</div>
   302	                    <div class="hanja" id="time-ground">å­</div>
   303	                    <div class="element" id="time-element">æœ¨ æ°´</div>
   304	                </div>
   305	                <div class="saju-column">
   306	                    <h3>æ—¥æŸ± (ì¼ì£¼)</h3>
   307	                    <div class="hanja" id="day-sky">ä¸™</div>
   308	                    <div class="hanja" id="day-ground">åˆ</div>
   309	                    <div class="element" id="day-element">ç« ç«</div>
   310	                </div>
   311	                <div class="saju-column">
   312	                    <h3>æœˆæŸ± (ì›”ì£¼)</h3>
   313	                    <div class="hanja" id="month-sky">æˆŠ</div>
   314	                    <div class="hanja" id="month-ground">å¯…</div>
   315	                    <div class="element" id="month-element">åœŸ æœ¨</div>
   316	                </div>
   317	                <div class="saju-column">
   318	                    <h3>å¹´æŸ± (ì—°ì£¼)</h3>
   319	                    <div class="hanja" id="year-sky">åºš</div>
   320	                    <div class="hanja" id="year-ground">ç”³</div>
   321	                    <div class="element" id="year-element">é‡‘ é‡‘</div>
   322	                </div>
   323	            </div>
   324	        </div>
   325	
   326	        <!-- ì¼ê°„ ë¶„ì„ -->
   327	        <div class="result-card">
   328	            <h2 class="section-title">ğŸ‘¤ ì¼ê°„ (æ—¥å¹²) ë¶„ì„</h2>
   329	            <div class="analysis-section">
   330	                <div class="analysis-item">
   331	                    <h4 id="day-master-title">ğŸ”¥ ë‹¹ì‹ ì˜ ì¼ê°„: ä¸™ç« (ë³‘í™”)</h4>
   332	                    <p id="day-master-desc">ë³‘í™”ëŠ” íƒœì–‘ì˜ ë¶ˆê³¼ ê°™ì€ ì„±ê²©ìœ¼ë¡œ, ë°ê³  ê¸ì •ì ì´ë©° ë¦¬ë”ì‹­ì´ ê°•í•©ë‹ˆë‹¤.</p>
   333	                </div>
   334	            </div>
   335	        </div>
   336	
   337	        <!-- ì˜¤í–‰ ë¶„ì„ -->
   338	        <div class="result-card">
   339	            <h2 class="section-title">ğŸ“Š ì˜¤í–‰ (äº”è¡Œ) ê· í˜•</h2>
   340	            <div class="analysis-section">
   341	                <div class="fortune-bar" data-element="æœ¨">
   342	                    <div class="fortune-bar-label">
   343	                        <span>ğŸŒ³ æœ¨ (ëª©)</span>
   344	                        <span class="percent">20%</span>
   345	                    </div>
   346	                    <div class="fortune-bar-bg">
   347	                        <div class="fortune-bar-fill" style="width: 20%;">20%</div>
   348	                    </div>
   349	                </div>
   350	                <div class="fortune-bar" data-element="ç«">
   351	                    <div class="fortune-bar-label">
   352	                        <span>ğŸ”¥ ç« (í™”)</span>
   353	                        <span class="percent">35%</span>
   354	                    </div>
   355	                    <div class="fortune-bar-bg">
   356	                        <div class="fortune-bar-fill" style="width: 35%;">35%</div>
   357	                    </div>
   358	                </div>
   359	                <div class="fortune-bar" data-element="åœŸ">
   360	                    <div class="fortune-bar-label">
   361	                        <span>ğŸ”ï¸ åœŸ (í† )</span>
   362	                        <span class="percent">15%</span>
   363	                    </div>
   364	                    <div class="fortune-bar-bg">
   365	                        <div class="fortune-bar-fill" style="width: 15%;">15%</div>
   366	                    </div>
   367	                </div>
   368	                <div class="fortune-bar" data-element="é‡‘">
   369	                    <div class="fortune-bar-label">
   370	                        <span>âš™ï¸ é‡‘ (ê¸ˆ)</span>
   371	                        <span class="percent">20%</span>
   372	                    </div>
   373	                    <div class="fortune-bar-bg">
   374	                        <div class="fortune-bar-fill" style="width: 20%;">20%</div>
   375	                    </div>
   376	                </div>
   377	                <div class="fortune-bar" data-element="æ°´">
   378	                    <div class="fortune-bar-label">
   379	                        <span>ğŸ’§ æ°´ (ìˆ˜)</span>
   380	                        <span class="percent">10%</span>
   381	                    </div>
   382	                    <div class="fortune-bar-bg">
   383	                        <div class="fortune-bar-fill" style="width: 10%;">10%</div>
   384	                    </div>
   385	                </div>
   386	            </div>
   387	        </div>
   388	
   389	        <!-- ì•¡ì…˜ ë²„íŠ¼ -->
   390	        <div class="action-buttons">
   391	            <a href="index.html" class="action-btn btn-secondary">
   392	                ğŸ  í™ˆìœ¼ë¡œ
   393	            </a>
   394	            <a href="pricing.html" class="action-btn btn-gold">
   395	                ğŸ‘‘ í”„ë¦¬ë¯¸ì—„ ë¶„ì„
   396	            </a>
   397	            <a href="ai-chat.html" class="action-btn btn-primary">
   398	                ğŸ¤– AI ìƒë‹´í•˜ê¸°
   399	            </a>
   400	        </div>
   401	    </div>
   402	
   403	    <!-- í‘¸í„° -->
   404	    <footer class="footer">
   405	        <p>Â© 2025 AI ì‚¬ì£¼ ì²œë…„ì§€ê¸°. All rights reserved.</p>
   406	    </footer>
   407	
   408	    <script>
   409	        // ===== ì‚¬ì£¼ ê³„ì‚° ì‹œìŠ¤í…œ (ì™„ì „ ë…ë¦½) =====
   410	        
   411	        const CHEONGAN = ['ç”²', 'ä¹™', 'ä¸™', 'ä¸', 'æˆŠ', 'å·±', 'åºš', 'è¾›', 'å£¬', 'ç™¸'];
   412	        const CHEONGAN_NAMES = ['ê°‘', 'ì„', 'ë³‘', 'ì •', 'ë¬´', 'ê¸°', 'ê²½', 'ì‹ ', 'ì„', 'ê³„'];
   413	        const JIJI = ['å­', 'ä¸‘', 'å¯…', 'å¯', 'è¾°', 'å·³', 'åˆ', 'æœª', 'ç”³', 'é…‰', 'æˆŒ', 'äº¥'];
   414	        const JIJI_NAMES = ['ì', 'ì¶•', 'ì¸', 'ë¬˜', 'ì§„', 'ì‚¬', 'ì˜¤', 'ë¯¸', 'ì‹ ', 'ìœ ', 'ìˆ ', 'í•´'];
   415	        
   416	        const ELEMENTS = {
   417	            'ç”²': 'æœ¨', 'ä¹™': 'æœ¨',
   418	            'ä¸™': 'ç«', 'ä¸': 'ç«',
   419	            'æˆŠ': 'åœŸ', 'å·±': 'åœŸ',
   420	            'åºš': 'é‡‘', 'è¾›': 'é‡‘',
   421	            'å£¬': 'æ°´', 'ç™¸': 'æ°´',
   422	            'å­': 'æ°´', 'ä¸‘': 'åœŸ', 'å¯…': 'æœ¨', 'å¯': 'æœ¨', 
   423	            'è¾°': 'åœŸ', 'å·³': 'ç«', 'åˆ': 'ç«', 'æœª': 'åœŸ',
   424	            'ç”³': 'é‡‘', 'é…‰': 'é‡‘', 'æˆŒ': 'åœŸ', 'äº¥': 'æ°´'
   425	        };
   426	        
   427	        // ìŒë ¥ ë°ì´í„° (1900-2100ë…„)
   428	        const LUNAR_DATA = [
   429	            0x04bd8,0x04ae0,0x0a570,0x054d5,0x0d260,0x0d950,0x16554,0x056a0,0x09ad0,0x055d2,
   430	            0x04ae0,0x0a5b6,0x0a4d0,0x0d250,0x1d255,0x0b540,0x0d6a0,0x0ada2,0x095b0,0x14977,
   431	            0x04970,0x0a4b0,0x0b4b5,0x06a50,0x06d40,0x1ab54,0x02b60,0x09570,0x052f2,0x04970,
   432	            0x06566,0x0d4a0,0x0ea50,0x06e95,0x05ad0,0x02b60,0x186e3,0x092e0,0x1c8d7,0x0c950,
   433	            0x0d4a0,0x1d8a6,0x0b550,0x056a0,0x1a5b4,0x025d0,0x092d0,0x0d2b2,0x0a950,0x0b557
   434	        ];
   435	        
   436	        // ìŒë ¥ â†’ ì–‘ë ¥ ë³€í™˜ (ê°„ë‹¨í•œ ë°©ì‹)
   437	        function lunarToSolar(year, month, day) {
   438	            // ê¸°ë³¸ì ìœ¼ë¡œ ì–‘ë ¥ìœ¼ë¡œ ì‚¬ìš© (ì •í™•í•œ ë³€í™˜ì€ Lunar ë¼ì´ë¸ŒëŸ¬ë¦¬ í•„ìš”)
   439	            // ê·¼ì‚¬ì¹˜: ìŒë ¥ ë‚ ì§œì— ì•½ 30ì¼ ì¶”ê°€
   440	            let solarMonth = month;
   441	            let solarDay = day + 30;
   442	            let solarYear = year;
   443	            
   444	            if (solarDay > 28) {
   445	                solarMonth++;
   446	                solarDay -= 28;
   447	            }
   448	            
   449	            if (solarMonth > 12) {
   450	                solarYear++;
   451	                solarMonth -= 12;
   452	            }
   453	            
   454	            return { year: solarYear, month: solarMonth, day: solarDay };
   455	        }
   456	        
   457	        // ë…„ì£¼ ê³„ì‚°
   458	        function calculateYearPillar(year, month, day) {
   459	            let sajuYear = year;
   460	            // ì…ì¶˜ ì „ì´ë©´ ì „ë…„ë„ë¡œ ê³„ì‚°
   461	            if (month === 1 || (month === 2 && day < 4)) {
   462	                sajuYear = year - 1;
   463	            }
   464	            
   465	            const baseYear = 1924; // ç”²å­ë…„
   466	            let offset = sajuYear - baseYear;
   467	            while (offset < 0) offset += 60;
   468	            offset = offset % 60;
   469	            
   470	            return {
   471	                cheongan: CHEONGAN[offset % 10],
   472	                jiji: JIJI[offset % 12],
   473	                cheongName: CHEONGAN_NAMES[offset % 10],
   474	                jijiName: JIJI_NAMES[offset % 12]
   475	            };
   476	        }
   477	        
   478	        // ì›”ì£¼ ê³„ì‚°
   479	        function calculateMonthPillar(year, month, day, yearPillar) {
   480	            // Lunar ë¼ì´ë¸ŒëŸ¬ë¦¬ ìš°ì„  ì‚¬ìš©
   481	            if (typeof Lunar !== 'undefined' && typeof Solar !== 'undefined') {
   482	                try {
   483	                    const solar = Solar.fromYmd(year, month, day);
   484	                    const lunar = solar.getLunar();
   485	                    const ganZhi = lunar.getMonthInGanZhi();
   486	                    
   487	                    const gan = ganZhi[0];
   488	                    const ji = ganZhi[1];
   489	                    const ganIndex = CHEONGAN.indexOf(gan);
   490	                    const jiIndex = JIJI.indexOf(ji);
   491	                    
   492	                    if (ganIndex >= 0 && jiIndex >= 0) {
   493	                        console.log(`âœ… Lunarë¡œ ì›”ì£¼ ê³„ì‚°: ${ganZhi}`);
   494	                        return {
   495	                            cheongan: gan,
   496	                            jiji: ji,
   497	                            cheongName: CHEONGAN_NAMES[ganIndex],
   498	                            jijiName: JIJI_NAMES[jiIndex]
   499	                        };
   500	                    }
   501	                } catch (e) {
   502	                    console.warn('âš ï¸ Lunar ì›”ì£¼ ê³„ì‚° ì‹¤íŒ¨:', e);
   503	                }
   504	            }
   505	            
   506	            // ì›”ê±´ ê³„ì‚° ê³µì‹
   507	            const yearGanIndex = CHEONGAN.indexOf(yearPillar.cheongan);
   508	            
   509	            // ì›”ì§€ëŠ” ìŒë ¥ ê¸°ì¤€
   510	            const monthJiIndex = (month + 1) % 12;
   511	            
   512	            // ì›”ê°„ ê³„ì‚°
   513	            const monthGanIndex = (yearGanIndex * 2 + month) % 10;
   514	            
   515	            return {
   516	                cheongan: CHEONGAN[monthGanIndex],
   517	                jiji: JIJI[monthJiIndex],
   518	                cheongName: CHEONGAN_NAMES[monthGanIndex],
   519	                jijiName: JIJI_NAMES[monthJiIndex]
   520	            };
   521	        }
   522	        
   523	        // ì¼ì£¼ ê³„ì‚°
   524	        function calculateDayPillar(year, month, day) {
   525	            // Lunar ë¼ì´ë¸ŒëŸ¬ë¦¬ ìš°ì„  ì‚¬ìš©
   526	            if (typeof Lunar !== 'undefined' && typeof Solar !== 'undefined') {
   527	                try {
   528	                    const solar = Solar.fromYmd(year, month, day);
   529	                    const lunar = solar.getLunar();
   530	                    const ganZhi = lunar.getDayInGanZhi();
   531	                    
   532	                    const gan = ganZhi[0];
   533	                    const ji = ganZhi[1];
   534	                    const ganIndex = CHEONGAN.indexOf(gan);
   535	                    const jiIndex = JIJI.indexOf(ji);
   536	                    
   537	                    if (ganIndex >= 0 && jiIndex >= 0) {
   538	                        console.log(`âœ… Lunarë¡œ ì¼ì£¼ ê³„ì‚°: ${ganZhi}`);
   539	                        return {
   540	                            cheongan: gan,
   541	                            jiji: ji,
   542	                            cheongName: CHEONGAN_NAMES[ganIndex],
   543	                            jijiName: JIJI_NAMES[jiIndex]
   544	                        };
   545	                    }
   546	                } catch (e) {
   547	                    console.warn('âš ï¸ Lunar ì¼ì£¼ ê³„ì‚° ì‹¤íŒ¨:', e);
   548	                }
   549	            }
   550	            
   551	            // 1900ë…„ 1ì›” 1ì¼ = åºšè¾°ì¼
   552	            const baseDate = new Date(1900, 0, 1);
   553	            const targetDate = new Date(year, month - 1, day);
   554	            const diffDays = Math.floor((targetDate - baseDate) / (1000 * 60 * 60 * 24));
   555	            
   556	            const baseGanIndex = 6;  // åºš
   557	            const baseJiIndex = 4;   // è¾°
   558	            
   559	            let ganIndex = (baseGanIndex + diffDays) % 10;
   560	            let jiIndex = (baseJiIndex + diffDays) % 12;
   561	            
   562	            if (ganIndex < 0) ganIndex += 10;
   563	            if (jiIndex < 0) jiIndex += 12;
   564	            
   565	            return {
   566	                cheongan: CHEONGAN[ganIndex],
   567	                jiji: JIJI[jiIndex],
   568	                cheongName: CHEONGAN_NAMES[ganIndex],
   569	                jijiName: JIJI_NAMES[jiIndex]
   570	            };
   571	        }
   572	        
   573	        // ì‹œì£¼ ê³„ì‚°
   574	        function calculateHourPillar(dayCheongan, hour) {
   575	            const dayCheongIndex = CHEONGAN.indexOf(dayCheongan);
   576	            
   577	            // ì‹œê°„ì„ ì§€ì§€ë¡œ ë³€í™˜
   578	            let hourJijiIndex;
   579	            if (hour >= 23 || hour < 1) {
   580	                hourJijiIndex = 0; // å­æ™‚ (23:00-00:59)
   581	            } else if (hour >= 1 && hour < 3) {
   582	                hourJijiIndex = 1; // ä¸‘æ™‚
   583	            } else if (hour >= 3 && hour < 5) {
   584	                hourJijiIndex = 2; // å¯…æ™‚
   585	            } else if (hour >= 5 && hour < 7) {
   586	                hourJijiIndex = 3; // å¯æ™‚
   587	            } else if (hour >= 7 && hour < 9) {
   588	                hourJijiIndex = 4; // è¾°æ™‚
   589	            } else if (hour >= 9 && hour < 11) {
   590	                hourJijiIndex = 5; // å·³æ™‚
   591	            } else if (hour >= 11 && hour < 13) {
   592	                hourJijiIndex = 6; // åˆæ™‚
   593	            } else if (hour >= 13 && hour < 15) {
   594	                hourJijiIndex = 7; // æœªæ™‚
   595	            } else if (hour >= 15 && hour < 17) {
   596	                hourJijiIndex = 8; // ç”³æ™‚
   597	            } else if (hour >= 17 && hour < 19) {
   598	                hourJijiIndex = 9; // é…‰æ™‚
   599	            } else if (hour >= 19 && hour < 21) {
   600	                hourJijiIndex = 10; // æˆŒæ™‚
   601	            } else {
   602	                hourJijiIndex = 11; // äº¥æ™‚
   603	            }
   604	            
   605	            // ì‹œê°„ì˜ ì²œê°„ ê³„ì‚°
   606	            const dayGanIndex = dayCheongIndex % 5;
   607	            const hourGanStart = dayGanIndex * 2;
   608	            const hourCheongIndex = (hourGanStart + hourJijiIndex) % 10;
   609	            
   610	            return {
   611	                cheongan: CHEONGAN[hourCheongIndex],
   612	                jiji: JIJI[hourJijiIndex],
   613	                cheongName: CHEONGAN_NAMES[hourCheongIndex],
   614	                jijiName: JIJI_NAMES[hourJijiIndex]
   615	            };
   616	        }
   617	        
   618	        // localStorageì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
   619	        const sajuData = JSON.parse(localStorage.getItem('sajuData') || '{}');
   620	        console.log('ğŸ“¦ ì‚¬ì£¼ ë°ì´í„°:', sajuData);
   621	        
   622	        if (sajuData.birthdate) {
   623	            document.getElementById('birthdate').textContent = sajuData.birthdate;
   624	            document.getElementById('calendar').textContent = sajuData.calendar === 'solar' ? 'ì–‘ë ¥' : 'ìŒë ¥';
   625	            document.getElementById('gender').textContent = sajuData.gender === 'male' ? 'ë‚¨ì„±' : 'ì—¬ì„±';
   626	            
   627	            // ë‚ ì§œ íŒŒì‹±
   628	            let [year, month, day] = sajuData.birthdate.split('-').map(Number);
   629	            const hour = parseInt(sajuData.hour || 12);
   630	            const isLunar = sajuData.calendar === 'lunar';
   631	            
   632	            console.log('ğŸ“… ì…ë ¥:', { year, month, day, hour, isLunar });
   633	            
   634	            // ìŒë ¥ â†’ ì–‘ë ¥ ë³€í™˜
   635	            if (isLunar && typeof Lunar !== 'undefined') {
   636	                try {
   637	                    const lunar = Lunar.fromYmd(year, month, day);
   638	                    const solar = lunar.getSolar();
   639	                    year = solar.getYear();
   640	                    month = solar.getMonth();
   641	                    day = solar.getDay();
   642	                    console.log('âœ… ìŒë ¥â†’ì–‘ë ¥:', `${year}-${month}-${day}`);
   643	                } catch (e) {
   644	                    console.error('âŒ ìŒë ¥ ë³€í™˜ ì‹¤íŒ¨:', e);
   645	                    // ê·¼ì‚¬ì¹˜ ì‚¬ìš©
   646	                    const solar = lunarToSolar(year, month, day);
   647	                    year = solar.year;
   648	                    month = solar.month;
   649	                    day = solar.day;
   650	                }
   651	            }
   652	            
   653	            // ì‚¬ì£¼ ê³„ì‚°
   654	            const yearPillar = calculateYearPillar(year, month, day);
   655	            const monthPillar = calculateMonthPillar(year, month, day, yearPillar);
   656	            const dayPillar = calculateDayPillar(year, month, day);
   657	            const hourPillar = calculateHourPillar(dayPillar.cheongan, hour);
   658	            
   659	            console.log('ğŸ´ ì‚¬ì£¼:', {
   660	                ë…„ì£¼: yearPillar.cheongan + yearPillar.jiji,
   661	                ì›”ì£¼: monthPillar.cheongan + monthPillar.jiji,
   662	                ì¼ì£¼: dayPillar.cheongan + dayPillar.jiji,
   663	                ì‹œì£¼: hourPillar.cheongan + hourPillar.jiji
   664	            });
   665	            
   666	            // ë…„ì£¼ í‘œì‹œ
   667	            document.getElementById('year-sky').textContent = yearPillar.cheongan;
   668	            document.getElementById('year-ground').textContent = yearPillar.jiji;
   669	            document.getElementById('year-element').textContent = ELEMENTS[yearPillar.cheongan] + ' ' + ELEMENTS[yearPillar.jiji];
   670	            
   671	            // ì›”ì£¼ í‘œì‹œ
   672	            document.getElementById('month-sky').textContent = monthPillar.cheongan;
   673	            document.getElementById('month-ground').textContent = monthPillar.jiji;
   674	            document.getElementById('month-element').textContent = ELEMENTS[monthPillar.cheongan] + ' ' + ELEMENTS[monthPillar.jiji];
   675	            
   676	            // ì¼ì£¼ í‘œì‹œ
   677	            document.getElementById('day-sky').textContent = dayPillar.cheongan;
   678	            document.getElementById('day-ground').textContent = dayPillar.jiji;
   679	            document.getElementById('day-element').textContent = ELEMENTS[dayPillar.cheongan] + ' ' + ELEMENTS[dayPillar.jiji];
   680	            
   681	            // ì‹œì£¼ í‘œì‹œ
   682	            document.getElementById('time-sky').textContent = hourPillar.cheongan;
   683	            document.getElementById('time-ground').textContent = hourPillar.jiji;
   684	            document.getElementById('time-element').textContent = ELEMENTS[hourPillar.cheongan] + ' ' + ELEMENTS[hourPillar.jiji];
   685	            
   686	            // ì¼ê°„ í‘œì‹œ
   687	            const dayMaster = dayPillar.cheongan;
   688	            const dayMasterElement = ELEMENTS[dayMaster];
   689	            const elementEmoji = {'æœ¨': 'ğŸŒ³', 'ç«': 'ğŸ”¥', 'åœŸ': 'ğŸ”ï¸', 'é‡‘': 'âš™ï¸', 'æ°´': 'ğŸ’§'};
   690	            
   691	            document.getElementById('day-master-title').innerHTML = 
   692	                `${elementEmoji[dayMasterElement]} ë‹¹ì‹ ì˜ ì¼ê°„: ${dayMaster}${dayMasterElement} (${dayPillar.cheongName}${dayMasterElement})`;
   693	            
   694	            // ì¼ê°„ ì„¤ëª…
   695	            const dayMasterDescriptions = {
   696	                'ç”²': 'ê°‘ëª©ì€ í° ë‚˜ë¬´ì™€ ê°™ì€ ì„±ê²©ìœ¼ë¡œ, ê³§ê³  ì •ì§í•˜ë©° ë¦¬ë”ì‹­ì´ ê°•í•©ë‹ˆë‹¤.',
   697	                'ä¹™': 'ì„ëª©ì€ ë©êµ´ê³¼ ê°™ì€ ì„±ê²©ìœ¼ë¡œ, ìœ ì—°í•˜ê³  ì ì‘ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤.',
   698	                'ä¸™': 'ë³‘í™”ëŠ” íƒœì–‘ì˜ ë¶ˆê³¼ ê°™ì€ ì„±ê²©ìœ¼ë¡œ, ë°ê³  ê¸ì •ì ì´ë©° ë¦¬ë”ì‹­ì´ ê°•í•©ë‹ˆë‹¤.',
   699	                'ä¸': 'ì •í™”ëŠ” ì´›ë¶ˆê³¼ ê°™ì€ ì„±ê²©ìœ¼ë¡œ, ì„¸ì‹¬í•˜ê³  ë”°ëœ»í•œ ë§ˆìŒì„ ê°€ì¡ŒìŠµë‹ˆë‹¤.',
   700	                'æˆŠ': 'ë¬´í† ëŠ” ì‚°ê³¼ ê°™ì€ ì„±ê²©ìœ¼ë¡œ, ì•ˆì •ì ì´ê³  ë¯¿ìŒì§í•©ë‹ˆë‹¤.',
   701	                'å·±': 'ê¸°í† ëŠ” ëŒ€ì§€ì™€ ê°™ì€ ì„±ê²©ìœ¼ë¡œ, í¬ìš©ë ¥ì´ í¬ê³  ì‹¤ìš©ì ì…ë‹ˆë‹¤.',
   702	                'åºš': 'ê²½ê¸ˆì€ ë°”ìœ„ì™€ ê°™ì€ ì„±ê²©ìœ¼ë¡œ, ê°•ì§í•˜ê³  ì˜ì§€ê°€ ê°•í•©ë‹ˆë‹¤.',
   703	                'è¾›': 'ì‹ ê¸ˆì€ ë³´ì„ê³¼ ê°™ì€ ì„±ê²©ìœ¼ë¡œ, ì„¸ë ¨ë˜ê³  ì˜ˆë¯¼í•©ë‹ˆë‹¤.',
   704	                'å£¬': 'ì„ìˆ˜ëŠ” í° ê°•ê³¼ ê°™ì€ ì„±ê²©ìœ¼ë¡œ, í™œë™ì ì´ê³  ì§€í˜œë¡­ìŠµë‹ˆë‹¤.',
   705	                'ç™¸': 'ê³„ìˆ˜ëŠ” ë¹—ë¬¼ê³¼ ê°™ì€ ì„±ê²©ìœ¼ë¡œ, ì„¬ì„¸í•˜ê³  í†µì°°ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤.'
   706	            };
   707	            
   708	            document.getElementById('day-master-desc').textContent = dayMasterDescriptions[dayMaster];
   709	            
   710	            // ì˜¤í–‰ ê· í˜• ê³„ì‚°
   711	            const elementCount = {'æœ¨': 0, 'ç«': 0, 'åœŸ': 0, 'é‡‘': 0, 'æ°´': 0};
   712	            
   713	            [yearPillar.cheongan, yearPillar.jiji,
   714	             monthPillar.cheongan, monthPillar.jiji,
   715	             dayPillar.cheongan, dayPillar.jiji,
   716	             hourPillar.cheongan, hourPillar.jiji].forEach(char => {
   717	                const element = ELEMENTS[char];
   718	                if (element) elementCount[element]++;
   719	            });
   720	            
   721	            console.log('ğŸ”¢ ì˜¤í–‰ ê°œìˆ˜:', elementCount);
   722	            
   723	            // í¼ì„¼íŠ¸ ê³„ì‚°
   724	            const elementPercent = {};
   725	            Object.keys(elementCount).forEach(key => {
   726	                elementPercent[key] = Math.round((elementCount[key] / 8) * 100);
   727	            });
   728	            
   729	            console.log('ğŸ“Š ì˜¤í–‰ ë¹„ìœ¨:', elementPercent);
   730	            
   731	            // ì˜¤í–‰ ë§‰ëŒ€ ì—…ë°ì´íŠ¸
   732	            document.querySelectorAll('.fortune-bar').forEach(bar => {
   733	                const element = bar.getAttribute('data-element');
   734	                const percent = elementPercent[element];
   735	                bar.querySelector('.percent').textContent = `${percent}%`;
   736	                bar.querySelector('.fortune-bar-fill').style.width = `${percent}%`;
   737	                bar.querySelector('.fortune-bar-fill').textContent = `${percent}%`;
   738	            });
   739	            
   740	            console.log('âœ… ì‚¬ì£¼ ê³„ì‚° ì™„ë£Œ');
   741	        } else {
   742	            console.log('âš ï¸ localStorageì— ë°ì´í„° ì—†ìŒ');
   743	        }
   744	        
   745	        // ë§‰ëŒ€ ì• ë‹ˆë©”ì´ì…˜
   746	        window.addEventListener('load', function() {
   747	            setTimeout(() => {
   748	                const bars = document.querySelectorAll('.fortune-bar-fill');
   749	                bars.forEach(bar => {
   750	                    const width = bar.style.width;
   751	                    bar.style.width = '0';
   752	                    setTimeout(() => { bar.style.width = width; }, 100);
   753	                });
   754	            }, 500);
   755	        });
   756	    </script>
   757	</body>
   758	</html>
   759	
