<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‚¬ì£¼íŒ”ì ê²°ê³¼ - AI ì‚¬ì£¼ ì²œë…„ì§€ê¸°</title>
    <script src="https://cdn.jsdelivr.net/npm/lunar-javascript@1.6.12/lunar.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', sans-serif; line-height: 1.6; color: #333; background: #f5f5f5; }
        .navbar { background: #1a1a1a; padding: 1rem 0; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.3); }
        .nav-container { max-width: 1200px; margin: 0 auto; padding: 0 20px; display: flex; justify-content: space-between; align-items: center; }
        .nav-brand { color: #d4af37; font-size: 1.5rem; font-weight: 700; text-decoration: none; }
        .nav-links a { color: rgba(255,255,255,0.9); text-decoration: none; margin-left: 2rem; transition: color 0.3s; }
        .nav-links a:hover { color: #d4af37; }
        .result-header { background: linear-gradient(135deg, #1a1a1a 0%, #8b0000 50%, #c41e3a 100%); color: white; padding: 60px 20px; text-align: center; }
        .result-header h1 { font-size: 2.5rem; margin-bottom: 1rem; font-weight: 700; }
        .result-header .user-info { font-size: 1.2rem; opacity: 0.9; }
        .result-container { max-width: 1000px; margin: -40px auto 60px; padding: 0 20px; }
        .result-card { background: white; border-radius: 20px; padding: 3rem; box-shadow: 0 10px 40px rgba(0,0,0,0.1); margin-bottom: 2rem; }
        .section-title { font-size: 1.8rem; color: #1a1a1a; margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 3px solid #d4af37; font-weight: 700; }
        .saju-table { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 2rem; }
        .saju-column { text-align: center; padding: 1.5rem; background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%); border-radius: 10px; border: 2px solid #d4af37; }
        .saju-column h3 { font-size: 1.1rem; color: #c41e3a; margin-bottom: 0.5rem; font-weight: 600; }
        .saju-column .hanja { font-size: 2rem; font-weight: 700; color: #1a1a1a; margin: 0.5rem 0; }
        .saju-column .element { font-size: 0.9rem; color: #666; }
        .analysis-section { margin-top: 2rem; }
        .analysis-item { padding: 1.5rem; background: #f9f9f9; border-radius: 10px; margin-bottom: 1rem; border-left: 4px solid #d4af37; }
        .analysis-item h4 { font-size: 1.2rem; color: #c41e3a; margin-bottom: 0.5rem; font-weight: 600; }
        .analysis-item p { color: #333; line-height: 1.8; }
        .fortune-bar { margin-top: 1rem; }
        .fortune-bar-label { display: flex; justify-content: space-between; margin-bottom: 0.5rem; font-size: 0.9rem; }
        .fortune-bar-bg { height: 30px; background: #e0e0e0; border-radius: 15px; overflow: hidden; }
        .fortune-bar-fill { height: 100%; background: linear-gradient(90deg, #d4af37, #f4e5b5); display: flex; align-items: center; justify-content: flex-end; padding-right: 10px; color: #1a1a1a; font-weight: 700; transition: width 1s ease; }
        .action-buttons { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 3rem; }
        .action-btn { padding: 15px 30px; border: none; border-radius: 10px; font-size: 1.1rem; font-weight: 600; cursor: pointer; text-decoration: none; text-align: center; transition: all 0.3s; display: inline-block; }
        .btn-primary { background: linear-gradient(135deg, #c41e3a, #8b0000); color: white; }
        .btn-primary:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(196,30,58,0.4); }
        .btn-secondary { background: white; color: #c41e3a; border: 2px solid #c41e3a; }
        .btn-secondary:hover { background: #c41e3a; color: white; }
        .btn-gold { background: linear-gradient(135deg, #d4af37, #f4e5b5); color: #1a1a1a; }
        .btn-gold:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(212,175,55,0.5); }
        .footer { background: #1a1a1a; color: rgba(255,255,255,0.7); padding: 40px 20px; text-align: center; }
        @media (max-width: 768px) { .saju-table { grid-template-columns: repeat(2, 1fr); } .result-card { padding: 2rem 1.5rem; } .result-header h1 { font-size: 2rem; } }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-brand">â˜¯ AI ì‚¬ì£¼ ì²œë…„ì§€ê¸°</a>
            <div class="nav-links">
                <a href="index.html">í™ˆ</a>
                <a href="pricing.html">ê°€ê²©í‘œ</a>
                <a href="mypage.html">ë§ˆì´í˜ì´ì§€</a>
            </div>
        </div>
    </nav>
    <section class="result-header">
        <h1>ğŸ´ ì‚¬ì£¼íŒ”ì ê²°ê³¼</h1>
        <div class="user-info">ìƒë…„ì›”ì¼: <span id="birthdate">-</span> (<span id="calendar">-</span>) | ì„±ë³„: <span id="gender">-</span></div>
    </section>
    <div class="result-container">
        <div class="result-card">
            <h2 class="section-title">â­ ë‹¹ì‹ ì˜ ì‚¬ì£¼íŒ”ì</h2>
            <div class="saju-table">
                <div class="saju-column"><h3>æ™‚æŸ± (ì‹œì£¼)</h3><div class="hanja" id="time-sky">ç”²</div><div class="hanja" id="time-ground">å­</div><div class="element" id="time-element">æœ¨ æ°´</div></div>
                <div class="saju-column"><h3>æ—¥æŸ± (ì¼ì£¼)</h3><div class="hanja" id="day-sky">ä¸™</div><div class="hanja" id="day-ground">åˆ</div><div class="element" id="day-element">ç« ç«</div></div>
                <div class="saju-column"><h3>æœˆæŸ± (ì›”ì£¼)</h3><div class="hanja" id="month-sky">æˆŠ</div><div class="hanja" id="month-ground">å¯…</div><div class="element" id="month-element">åœŸ æœ¨</div></div>
                <div class="saju-column"><h3>å¹´æŸ± (ì—°ì£¼)</h3><div class="hanja" id="year-sky">åºš</div><div class="hanja" id="year-ground">ç”³</div><div class="element" id="year-element">é‡‘ é‡‘</div></div>
            </div>
        </div>
        <div class="result-card">
            <h2 class="section-title">ğŸ‘¤ ì¼ê°„ (æ—¥å¹²) ë¶„ì„</h2>
            <div class="analysis-section">
                <div class="analysis-item">
                    <h4 id="day-master-title">ğŸ”¥ ë‹¹ì‹ ì˜ ì¼ê°„: ä¸™ç« (ë³‘í™”)</h4>
                    <p id="day-master-desc">ë³‘í™”ëŠ” íƒœì–‘ì˜ ë¶ˆê³¼ ê°™ì€ ì„±ê²©ìœ¼ë¡œ, ë°ê³  ê¸ì •ì ì´ë©° ë¦¬ë”ì‹­ì´ ê°•í•©ë‹ˆë‹¤.</p>
                </div>
            </div>
        </div>
        <div class="result-card">
            <h2 class="section-title">ğŸ“Š ì˜¤í–‰ (äº”è¡Œ) ê· í˜•</h2>
            <div class="analysis-section">
                <div class="fortune-bar" data-element="æœ¨"><div class="fortune-bar-label"><span>ğŸŒ³ æœ¨ (ëª©)</span><span class="percent">20%</span></div><div class="fortune-bar-bg"><div class="fortune-bar-fill" style="width:20%">20%</div></div></div>
                <div class="fortune-bar" data-element="ç«"><div class="fortune-bar-label"><span>ğŸ”¥ ç« (í™”)</span><span class="percent">35%</span></div><div class="fortune-bar-bg"><div class="fortune-bar-fill" style="width:35%">35%</div></div></div>
                <div class="fortune-bar" data-element="åœŸ"><div class="fortune-bar-label"><span>ğŸ”ï¸ åœŸ (í† )</span><span class="percent">15%</span></div><div class="fortune-bar-bg"><div class="fortune-bar-fill" style="width:15%">15%</div></div></div>
                <div class="fortune-bar" data-element="é‡‘"><div class="fortune-bar-label"><span>âš™ï¸ é‡‘ (ê¸ˆ)</span><span class="percent">20%</span></div><div class="fortune-bar-bg"><div class="fortune-bar-fill" style="width:20%">20%</div></div></div>
                <div class="fortune-bar" data-element="æ°´"><div class="fortune-bar-label"><span>ğŸ’§ æ°´ (ìˆ˜)</span><span class="percent">10%</span></div><div class="fortune-bar-bg"><div class="fortune-bar-fill" style="width:10%">10%</div></div></div>
            </div>
        </div>
        <div class="action-buttons">
            <a href="index.html" class="action-btn btn-secondary">ğŸ  í™ˆìœ¼ë¡œ</a>
            <a href="pricing.html" class="action-btn btn-gold">ğŸ‘‘ í”„ë¦¬ë¯¸ì—„ ë¶„ì„</a>
            <a href="ai-chat.html" class="action-btn btn-primary">ğŸ¤– AI ìƒë‹´í•˜ê¸°</a>
        </div>
    </div>
    <footer class="footer"><p>Â© 2025 AI ì‚¬ì£¼ ì²œë…„ì§€ê¸°. All rights reserved.</p></footer>
    <script>
const G=['ç”²','ä¹™','ä¸™','ä¸','æˆŠ','å·±','åºš','è¾›','å£¬','ç™¸'],GN=['ê°‘','ì„','ë³‘','ì •','ë¬´','ê¸°','ê²½','ì‹ ','ì„','ê³„'],
Z=['å­','ä¸‘','å¯…','å¯','è¾°','å·³','åˆ','æœª','ç”³','é…‰','æˆŒ','äº¥'],ZN=['ì','ì¶•','ì¸','ë¬˜','ì§„','ì‚¬','ì˜¤','ë¯¸','ì‹ ','ìœ ','ìˆ ','í•´'],
E={'ç”²':'æœ¨','ä¹™':'æœ¨','ä¸™':'ç«','ä¸':'ç«','æˆŠ':'åœŸ','å·±':'åœŸ','åºš':'é‡‘','è¾›':'é‡‘','å£¬':'æ°´','ç™¸':'æ°´','å­':'æ°´','ä¸‘':'åœŸ','å¯…':'æœ¨','å¯':'æœ¨','è¾°':'åœŸ','å·³':'ç«','åˆ':'ç«','æœª':'åœŸ','ç”³':'é‡‘','é…‰':'é‡‘','æˆŒ':'åœŸ','äº¥':'æ°´'};

function yearPillar(y,m,d){let sy=y;if(m===1||(m===2&&d<4))sy--;const o=(sy-1924+60)%60;return{cheongan:G[o%10],jiji:Z[o%12],cheongName:GN[o%10],jijiName:ZN[o%12]};}
function monthPillar(y,m,d){if(typeof Solar!=='undefined'){try{const s=Solar.fromYmd(y,m,d),l=s.getLunar(),gz=l.getMonthInGanZhi(),g=gz[0],j=gz[1],gi=G.indexOf(g),ji=Z.indexOf(j);if(gi>=0&&ji>=0)return{cheongan:g,jiji:j,cheongName:GN[gi],jijiName:ZN[ji]};}catch(e){}}const mji=(m+1)%12,mgi=(G.indexOf(yearPillar(y,m,d).cheongan)*2+m)%10;return{cheongan:G[mgi],jiji:Z[mji],cheongName:GN[mgi],jijiName:ZN[mji]};}
function dayPillar(y,m,d){if(typeof Solar!=='undefined'){try{const s=Solar.fromYmd(y,m,d),l=s.getLunar(),gz=l.getDayInGanZhi(),g=gz[0],j=gz[1],gi=G.indexOf(g),ji=Z.indexOf(j);if(gi>=0&&ji>=0)return{cheongan:g,jiji:j,cheongName:GN[gi],jijiName:ZN[ji]};}catch(e){}}const base=new Date(1900,0,1),target=new Date(y,m-1,d),diff=Math.floor((target-base)/864e5),gi=(6+diff)%10,ji=(4+diff)%12;return{cheongan:G[gi<0?gi+10:gi],jiji:Z[ji<0?ji+12:ji],cheongName:GN[gi<0?gi+10:gi],jijiName:ZN[ji<0?ji+12:ji]};}

// ğŸ”¥ ì „í†µ ë§Œì„¸ë ¥ ì‹œê°„ êµ¬ê°„ ì ìš© (30ë¶„ ë‹¨ìœ„)
function hourPillar(dc,h,min=0){
    const dci=G.indexOf(dc);
    // ì‹œê°„ì„ ë¶„ ë‹¨ìœ„ë¡œ ë³€í™˜ (ì˜ˆ: 17ì‹œ 20ë¶„ = 1040ë¶„)
    const totalMin=h*60+min;
    
    // ì „í†µ ë§Œì„¸ë ¥ ì‹œê°„ êµ¬ê°„ (30ë¶„ ë‹¨ìœ„)
    // å­æ™‚: 23:30-01:29 (1410-89ë¶„, ë˜ëŠ” 0-89ë¶„)
    // ä¸‘æ™‚: 01:30-03:29 (90-209ë¶„)
    // å¯…æ™‚: 03:30-05:29 (210-329ë¶„)
    // å¯æ™‚: 05:30-07:29 (330-449ë¶„)
    // è¾°æ™‚: 07:30-09:29 (450-569ë¶„)
    // å·³æ™‚: 09:30-11:29 (570-689ë¶„)
    // åˆæ™‚: 11:30-13:29 (690-809ë¶„)
    // æœªæ™‚: 13:30-15:29 (810-929ë¶„)
    // ç”³æ™‚: 15:30-17:29 (930-1049ë¶„) âœ… 17ì‹œ 20ë¶„ í¬í•¨!
    // é…‰æ™‚: 17:30-19:29 (1050-1169ë¶„)
    // æˆŒæ™‚: 19:30-21:29 (1170-1289ë¶„)
    // äº¥æ™‚: 21:30-23:29 (1290-1409ë¶„)
    
    let hji;
    if(totalMin>=1410||totalMin<90)hji=0;        // å­æ™‚ 23:30-01:29
    else if(totalMin>=90&&totalMin<210)hji=1;    // ä¸‘æ™‚ 01:30-03:29
    else if(totalMin>=210&&totalMin<330)hji=2;   // å¯…æ™‚ 03:30-05:29
    else if(totalMin>=330&&totalMin<450)hji=3;   // å¯æ™‚ 05:30-07:29
    else if(totalMin>=450&&totalMin<570)hji=4;   // è¾°æ™‚ 07:30-09:29
    else if(totalMin>=570&&totalMin<690)hji=5;   // å·³æ™‚ 09:30-11:29
    else if(totalMin>=690&&totalMin<810)hji=6;   // åˆæ™‚ 11:30-13:29
    else if(totalMin>=810&&totalMin<930)hji=7;   // æœªæ™‚ 13:30-15:29
    else if(totalMin>=930&&totalMin<1050)hji=8;  // ç”³æ™‚ 15:30-17:29 âœ…
    else if(totalMin>=1050&&totalMin<1170)hji=9; // é…‰æ™‚ 17:30-19:29
    else if(totalMin>=1170&&totalMin<1290)hji=10;// æˆŒæ™‚ 19:30-21:29
    else hji=11;                                 // äº¥æ™‚ 21:30-23:29
    
    const hgi=((dci%5)*2+hji)%10;
    return{cheongan:G[hgi],jiji:Z[hji],cheongName:GN[hgi],jijiName:ZN[hji]};
}

const sd=JSON.parse(localStorage.getItem('sajuData')||'{}');
if(sd.birthdate){
    document.getElementById('birthdate').textContent=sd.birthdate;
    document.getElementById('calendar').textContent=sd.calendar==='solar'?'ì–‘ë ¥':'ìŒë ¥';
    document.getElementById('gender').textContent=sd.gender==='male'?'ë‚¨ì„±':'ì—¬ì„±';
    let [y,m,d]=sd.birthdate.split('-').map(Number);
    
    // ì‹œê°„ íŒŒì‹±: "17", "17:20", "16" ë“± ì§€ì›
    let h=12,min=0;
    if(sd.hour){
        const hourStr=String(sd.hour);
        if(hourStr.includes(':')){
            const [hh,mm]=hourStr.split(':').map(Number);
            h=hh;min=mm;
        }else{
            h=parseInt(hourStr);
        }
    }
    
    const isL=sd.calendar==='lunar';
    if(isL&&typeof Lunar!=='undefined'){try{const l=Lunar.fromYmd(y,m,d),s=l.getSolar();y=s.getYear();m=s.getMonth();d=s.getDay();}catch(e){}}
    const yp=yearPillar(y,m,d),mp=monthPillar(y,m,d),dp=dayPillar(y,m,d),hp=hourPillar(dp.cheongan,h,min);
    
    console.log('ğŸ• ì‹œê°„ ì •ë³´:', {hour:h, minute:min, totalMin:h*60+min});
    console.log('ğŸ”® ì‹œì£¼ ê³„ì‚° ê²°ê³¼:', hp);
    
    document.getElementById('year-sky').textContent=yp.cheongan;
    document.getElementById('year-ground').textContent=yp.jiji;
    document.getElementById('year-element').textContent=E[yp.cheongan]+' '+E[yp.jiji];
    document.getElementById('month-sky').textContent=mp.cheongan;
    document.getElementById('month-ground').textContent=mp.jiji;
    document.getElementById('month-element').textContent=E[mp.cheongan]+' '+E[mp.jiji];
    document.getElementById('day-sky').textContent=dp.cheongan;
    document.getElementById('day-ground').textContent=dp.jiji;
    document.getElementById('day-element').textContent=E[dp.cheongan]+' '+E[dp.jiji];
    document.getElementById('time-sky').textContent=hp.cheongan;
    document.getElementById('time-ground').textContent=hp.jiji;
    document.getElementById('time-element').textContent=E[hp.cheongan]+' '+E[hp.jiji];
    const dm=dp.cheongan,dme=E[dm],ee={'æœ¨':'ğŸŒ³','ç«':'ğŸ”¥','åœŸ':'ğŸ”ï¸','é‡‘':'âš™ï¸','æ°´':'ğŸ’§'};
    document.getElementById('day-master-title').innerHTML=`${ee[dme]} ë‹¹ì‹ ì˜ ì¼ê°„: ${dm}${dme} (${dp.cheongName}${dme})`;
    const desc={'ç”²':'ê°‘ëª©ì€ í° ë‚˜ë¬´ì™€ ê°™ì€ ì„±ê²©ìœ¼ë¡œ, ê³§ê³  ì •ì§í•˜ë©° ë¦¬ë”ì‹­ì´ ê°•í•©ë‹ˆë‹¤.','ä¹™':'ì„ëª©ì€ ë©êµ´ê³¼ ê°™ì€ ì„±ê²©ìœ¼ë¡œ, ìœ ì—°í•˜ê³  ì ì‘ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤.','ä¸™':'ë³‘í™”ëŠ” íƒœì–‘ì˜ ë¶ˆê³¼ ê°™ì€ ì„±ê²©ìœ¼ë¡œ, ë°ê³  ê¸ì •ì ì´ë©° ë¦¬ë”ì‹­ì´ ê°•í•©ë‹ˆë‹¤.','ä¸':'ì •í™”ëŠ” ì´›ë¶ˆê³¼ ê°™ì€ ì„±ê²©ìœ¼ë¡œ, ì„¸ì‹¬í•˜ê³  ë”°ëœ»í•œ ë§ˆìŒì„ ê°€ì¡ŒìŠµë‹ˆë‹¤.','æˆŠ':'ë¬´í† ëŠ” ì‚°ê³¼ ê°™ì€ ì„±ê²©ìœ¼ë¡œ, ì•ˆì •ì ì´ê³  ë¯¿ìŒì§í•©ë‹ˆë‹¤.','å·±':'ê¸°í† ëŠ” ëŒ€ì§€ì™€ ê°™ì€ ì„±ê²©ìœ¼ë¡œ, í¬ìš©ë ¥ì´ í¬ê³  ì‹¤ìš©ì ì…ë‹ˆë‹¤.','åºš':'ê²½ê¸ˆì€ ë°”ìœ„ì™€ ê°™ì€ ì„±ê²©ìœ¼ë¡œ, ê°•ì§í•˜ê³  ì˜ì§€ê°€ ê°•í•©ë‹ˆë‹¤.','è¾›':'ì‹ ê¸ˆì€ ë³´ì„ê³¼ ê°™ì€ ì„±ê²©ìœ¼ë¡œ, ì„¸ë ¨ë˜ê³  ì˜ˆë¯¼í•©ë‹ˆë‹¤.','å£¬':'ì„ìˆ˜ëŠ” í° ê°•ê³¼ ê°™ì€ ì„±ê²©ìœ¼ë¡œ, í™œë™ì ì´ê³  ì§€í˜œë¡­ìŠµë‹ˆë‹¤.','ç™¸':'ê³„ìˆ˜ëŠ” ë¹—ë¬¼ê³¼ ê°™ì€ ì„±ê²©ìœ¼ë¡œ, ì„¬ì„¸í•˜ê³  í†µì°°ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤.'};
    document.getElementById('day-master-desc').textContent=desc[dm];
    const ec={'æœ¨':0,'ç«':0,'åœŸ':0,'é‡‘':0,'æ°´':0};
    [yp.cheongan,yp.jiji,mp.cheongan,mp.jiji,dp.cheongan,dp.jiji,hp.cheongan,hp.jiji].forEach(c=>{const e=E[c];if(e)ec[e]++;});
    const ep={};Object.keys(ec).forEach(k=>ep[k]=Math.round(ec[k]/8*100));
    document.querySelectorAll('.fortune-bar').forEach(b=>{const el=b.getAttribute('data-element'),pc=ep[el];b.querySelector('.percent').textContent=`${pc}%`;b.querySelector('.fortune-bar-fill').style.width=`${pc}%`;b.querySelector('.fortune-bar-fill').textContent=`${pc}%`;});
}
window.addEventListener('load',()=>{setTimeout(()=>{document.querySelectorAll('.fortune-bar-fill').forEach(b=>{const w=b.style.width;b.style.width='0';setTimeout(()=>b.style.width=w,100);});},500);});
    </script>
</body>
</html>
